<%@ Page Title="" Language="C#" MasterPageFile="~/mpUsuario.master" AutoEventWireup="true" CodeFile="usuarioPerfil.aspx.cs" Inherits="usuarioPerfil" %> <asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server"> <style type="text/css"> .txtCEP{min-width:86px;}.txtRG{min-width:98px;}.txtNome{min-width:100px;}.ddlSexo{min-width:100px;}.txtCPF{min-width:110px;}.txtCel{min-width:112px;}.txtData{min-width:79px;}.txtEmail{min-width:120px;}.txtNumECompl{min-width:45px;}.imgUploaded{padding-top:5px;max-width:180px;max-height:180px;} .btnExcPerfil {min-height: 35px;min-width: 130px;border-style: none;border-color: inherit;border-width: medium;font-size: 16px;background-color: #00ffff;color: white;padding: 6px;cursor: pointer;border-radius: 4px;transition: 0.3s;} .btnExcPerfil:hover {background-color: #58d7ee;transition: 0.3s;} .btnOK {min-height: 33px;min-width: 40px;border-style: none;border-color: inherit;border-width: medium;font-size: 16px;background-color: #00ffff;color: white;padding: 6px;cursor: pointer;border-radius: 4px;transition: 0.3s;} .btnOK:hover {background-color: #58d7ee;transition: 0.3s;} .btnForca {min-height: 33px;min-width: 112px;border-style: none;border-color: inherit;border-width: medium;font-size: 16px;background-color: #00ffff;color: white;padding: 6px;cursor: pointer;border-radius: 4px;transition: 0.3s;} .btnForca:hover {background-color: #58d7ee;transition: 0.3s;} .btnAltPerfil {min-height: 35px;border-style: none;border-color: inherit;border-width: medium;font-size: 16px;background-color: #00ffff;color: white;padding: 6px;cursor: pointer;border-radius: 4px;transition: 0.3s;} .btnAltPerfil:hover {background-color: #58d7ee;transition: 0.3s;} .btnFPgto {min-height: 32px;min-width: 82px;max-height:40px;max-width:300px; font-stretch:ultra-condensed;display: -webkit-box;-webkit-line-clamp: 1;-webkit-box-orient: vertical;overflow: hidden;text-overflow: ellipsis;border-style: none;border-color: inherit;border-width: medium;font-size: 16px;background-color: #00ffff;color: white;padding: 6px;cursor: pointer;border-radius: 4px;transition: 0.3s;} .btnFPgto:hover {background-color: #58d7ee;transition: 0.3s;} .auto80 {height: 128px;}.auto-style8 {padding-bottom:2px;}.auto-style9 {font-stretch: extra-condensed;}.auto-style17 {padding-bottom:4px;}.auto-style18 {font-stretch: extra-condensed;}.auto-style45 {width: 24%;}.auto-style47 {width: 32%;}.auto-style48 {height: 1%;width: 20%;}.auto-style50 {height: 5%;}.auto-style51 {height: 7%;}.auto-style52 {height: 10%;}.auto-style55 {width: 32%;}.auto1 {height: 4%;}.auto2 {height: 10%;}.auto3 {height: 4%;}.auto4 {height: 10%;}.auto5 {height: 12%;}.auto-style11 {}.auto-style12 {}.auto-style36 {}.auto-style54 {}.auto-style57 {}.auto-style58 {}.auto-style59 {} </style> </asp:Content> <asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server"> <form id="form1" runat="server"> <table style="width: 100%; height: 512px;"> <tr> <td class="auto-style48" style="text-align: center; font-size: 20px; font-weight: bold;" class="auto-style7">PERFIL<div class="line-title bg-primary"></div> </td> <td class="auto-style45"> <asp:Label ID="lblResp" runat="server" Font-Bold="True" ForeColor="Red"></asp:Label> </td> <td class="auto-style55"></td> <td class="auto-style47"></td> </tr> <tr> <td class="auto-style50" style="text-align: right;">Nome:</td> <td class="auto-style8">&nbsp;<asp:TextBox ID="txtNome" runat="server" Width="175px" CssClass="txtNome" TabIndex="1"></asp:TextBox> </td> <td style="text-align: right;" class="auto-style54">Data de Nascimento:</td> <td class="auto-style36">&nbsp;<asp:TextBox ID="txtData" runat="server" Width="22%" ClientIDMode="Static" CssClass="txtData" TabIndex="2"></asp:TextBox> </td> </tr> <tr> <td class="auto80" style="text-align: right;">Imagem de Perfil:</td> <td class="auto80"> <asp:Image ID="Image1" runat="server" Height="100%" Width="100%" ImageAlign="Middle" ImageUrl="~/img/uploaded/USER_PATTERN.png" CssClass="imgUploaded" /> </td> <td style="text-align: center;" class="auto-style54"> <asp:FileUpload ID="img" runat="server" TabIndex="3" /> </td> <td class="auto-style36"> <asp:Label ID="lblFPgto" runat="server" Text="Nenhuma forma de pagamento."></asp:Label><br /> <asp:Button ID="btnFPgto" runat="server" Text="ADICIONAR UMA FORMA DE PAGAMENTO" CssClass="btnFPgto" Height="30%" Width="64%" OnClick="btnFPgto_Click"/> </td> </tr> <tr> <td class="auto-style51" style="text-align: right;">Sexo:</td> <td class="auto-style11">&nbsp;<asp:DropDownList ID="ddlSexo" runat="server" Width="38%" CssClass="ddlSexo" TabIndex="4"> <asp:ListItem></asp:ListItem> <asp:ListItem>Masculino</asp:ListItem> <asp:ListItem>Feminino</asp:ListItem> <asp:ListItem>Outros</asp:ListItem> </asp:DropDownList> </td> <td class="auto-style57" style="text-align: right;">RG:</td> <td class="auto-style12">&nbsp;<asp:TextBox ID="rg" runat="server" Width="26%" ClientIDMode="Static" CssClass="txtRG" TabIndex="5"></asp:TextBox> </td> </tr> <tr> <td class="auto-style52" style="text-align: right;">CPF:</td> <td class="auto-style17">&nbsp;<asp:TextBox ID="cpf" runat="server" Width="46%" ClientIDMode="Static" CssClass="txtCPF" TabIndex="6"></asp:TextBox> </td> <td class="auto-style58" style="text-align: right;">CEP:</td> <td class="auto-style18">&nbsp;<asp:TextBox ID="cep" runat="server" Width="20%" ClientIDMode="Static" CssClass="txtCEP" TabIndex="7"></asp:TextBox> &nbsp;<asp:Button ID="btnOK" runat="server" Text="OK" CssClass="btnOK" Height="86%" OnClick="btnOK_Click" TabIndex="8" /> </td> </tr> <tr> <td class="auto1" style="text-align: right;">Celular:</td> <td class="auto-style17">&nbsp;<asp:TextBox ID="celular" runat="server" ClientIDMode="Static" Width="50%" CssClass="txtCel" TabIndex="9"></asp:TextBox> </td> <td class="auto-style58" style="text-align: center;">&nbsp;</td> <td class="auto-style18"> <asp:Label ID="lblRua" runat="server"></asp:Label> &nbsp;&nbsp;<asp:Label ID="lblBairro" runat="server"></asp:Label> </td> </tr> <tr> <td class="auto2" style="text-align: right;">Email:</td> <td class="auto-style8">&nbsp;<asp:TextBox ID="txtEmail" runat="server" Width="56%" CssClass="txtEmail" TabIndex="10"></asp:TextBox> </td> <td class="auto-style59" style="text-align: center;">&nbsp;</td> <td class="auto-style9"> <asp:Label ID="lblCidade" runat="server"></asp:Label> &nbsp;&nbsp; <asp:Label ID="lblUf" runat="server"></asp:Label> </td> </tr> <tr> <td class="auto3" style="text-align: right;">Nova Senha:</td> <td class="auto-style8">&nbsp;<asp:TextBox ID="txtSenha" runat="server" TextMode="Password" Width="48%" TabIndex="11"></asp:TextBox> &nbsp;<asp:Label ID="lblSaved" runat="server" Text="SENHA SALVA!" Visible="False"></asp:Label> </td> <td class="auto-style59" style="text-align: right;">Número (Casa):</td> <td class="auto-style9">&nbsp;<asp:TextBox ID="txtNumCasa" runat="server" MaxLength="4" Width="10%" CssClass="txtNumECompl" ClientIDMode="Static" TabIndex="14"></asp:TextBox> </td> </tr> <tr> <td class="auto4" style="text-align: right;">Confirmar Nova Senha:</td> <td class="auto-style8">&nbsp;<asp:TextBox ID="txtConfSenha" runat="server" TextMode="Password" Width="48%" TabIndex="12"></asp:TextBox> <asp:Button ID="btnForca" runat="server" CssClass="btnForca" Height="80%" Text="Força" Width="48%" OnClick="btnForca_Click" TabIndex="13" /> </td> <td class="auto-style59" style="text-align: right;">Complemento:</td> <td class="auto-style9">&nbsp;<asp:TextBox ID="txtCompl" runat="server" Width="10%" MaxLength="4" CssClass="txtNumECompl" TabIndex="15"></asp:TextBox> <asp:SqlDataSource ID="sqlVerEmailUsuario" runat="server" ConnectionString="<%$ ConnectionStrings:neonaeConnectionString %>" ProviderName="<%$ ConnectionStrings:neonaeConnectionString.ProviderName %>" SelectCommand="SELECT count(*) as qtdEmail FROM verlogin where email=@emailex"> <SelectParameters> <asp:Parameter Name="emailex" /> </SelectParameters> </asp:SqlDataSource> </td> </tr> <tr> <td class="auto5" style="text-align: center;"> <asp:Button ID="btnExcluir" runat="server" Height="76%" Text="Desativar Perfil" Width="48%" OnClick="btnExcluir_Click" CssClass="btnExcPerfil" TabIndex="18" /> </td> <td class="auto-style8" style="text-align: right;">Digite sua atual senha:</td> <td class="auto-style59">&nbsp;<asp:TextBox ID="txtDigSenha" runat="server" TextMode="Password" Width="36%" TabIndex="16"></asp:TextBox> &nbsp;<asp:Button ID="btnAlterar" runat="server" Height="75%" Text="Alterar" Width="32%" OnClick="btnAlterar_Click" CssClass="btnAltPerfil" TabIndex="17" /> </td> <td class="auto-style9"> <asp:Label ID="lblErroDigSenha" runat="server" Font-Bold="True" ForeColor="Red"></asp:Label> <asp:SqlDataSource ID="sqlUsuario" runat="server" ConnectionString="<%$ ConnectionStrings:neonaeConnectionString %>" ProviderName="<%$ ConnectionStrings:neonaeConnectionString.ProviderName %>" SelectCommand="SELECT id_usu, id_tusu, nome_usu, dtnasc_usu, email_usu, senha_usu, cel_usu, sx_usu, img_usu, rg_usu, cpf_usu, cep_usu, numcasa_usu, compl_usu FROM usuario WHERE (id_tusu = 3) AND (email_usu = @EMAIL)" UpdateCommand="UPDATE usuario SET nome_usu = @nome, dtnasc_usu = @dt, sx_usu = @sexo, cel_usu = @fone, img_usu = @img, rg_usu = @rg, cep_usu = @cep, numcasa_usu = @num, compl_usu = @compl, senha_usu = @senha, email_usu = @emailUsu, cpf_usu = @cpf WHERE (id_usu = @id)" InsertCommand="insert into aud_usu values(0,@id,@table,@desc,@hr,@data)"> <InsertParameters> <asp:Parameter Name="id" /> <asp:Parameter Name="table" /> <asp:Parameter Name="desc" /> <asp:Parameter Name="hr" /> <asp:Parameter Name="data" /> </InsertParameters> <SelectParameters> <asp:Parameter Name="EMAIL" /> </SelectParameters> <UpdateParameters> <asp:Parameter Name="nome" /> <asp:Parameter Name="dt" /> <asp:Parameter Name="sexo" /> <asp:Parameter Name="fone" /> <asp:Parameter Name="img" /> <asp:Parameter Name="rg" /> <asp:Parameter Name="cep" /> <asp:Parameter Name="num" /> <asp:Parameter Name="compl" /> <asp:Parameter Name="senha" /> <asp:Parameter Name="emailUsu" /> <asp:Parameter Name="cpf" /> <asp:Parameter Name="email" /> <asp:SessionParameter Name="id" SessionField="getIdUsu" /> </UpdateParameters> </asp:SqlDataSource> <asp:SqlDataSource ID="sqlVerCpfUsuario" runat="server" ConnectionString="<%$ ConnectionStrings:neonaeConnectionString %>" ProviderName="<%$ ConnectionStrings:neonaeConnectionString.ProviderName %>" SelectCommand="SELECT count(*) as qtdCpf FROM vercpf where cpf=@cpf" UpdateCommand="update usuario set ativo_usu=0 where id_usu=@id"> <SelectParameters> <asp:Parameter Name="cpf" /> </SelectParameters> <UpdateParameters> <asp:SessionParameter Name="id" SessionField="getIdUsu" /> </UpdateParameters> </asp:SqlDataSource> <asp:SqlDataSource ID="sqlFPgto" runat="server" ConnectionString="<%$ ConnectionStrings:neonaeConnectionString %>" ProviderName="<%$ ConnectionStrings:neonaeConnectionString.ProviderName %>" SelectCommand="SELECT * FROM fpgto where id_usu=@id and ativo_pgto=1" UpdateCommand="update fpgto set ativo_pgto=0 where id_pgto=@id"> <SelectParameters> <asp:SessionParameter Name="id" SessionField="getIdUsu" /> </SelectParameters> <UpdateParameters> <asp:SessionParameter Name="id" SessionField="idFPgto" /> </UpdateParameters> </asp:SqlDataSource> </td> </tr> </table> </form> </asp:Content> 